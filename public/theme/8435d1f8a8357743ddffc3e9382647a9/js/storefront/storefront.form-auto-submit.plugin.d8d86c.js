"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[99699],{9699:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var i=s(9568),r=s(5878),o=s(6471),n=s(3107),a=s(4049),c=s(2940),h=s(9610);class l extends i.Z{init(){if(this.formSubmittedByCaptcha=!1,this._getForm(),!this._form)throw Error("No form found for the plugin: ".concat(this.constructor.name));if(this._client=new n.Z,this.options.useAjax&&!this.options.ajaxContainerSelector)throw Error("[".concat(this.constructor.name,'] The option "ajaxContainerSelector" must be given when using ajax.'));if(this.options.changeTriggerSelectors&&!Array.isArray(this.options.changeTriggerSelectors))throw Error("[".concat(this.constructor.name,'] The option "changeTriggerSelectors" must be an array of selector strings.'));this._registerEvents(),this._resumeFocusState()}_getForm(){this.el&&"FORM"===this.el.nodeName?this._form=this.el:this._form=this.el.closest("form")}_registerEvents(){if(this.options.useAjax){let e=this.options.delayChangeEvent?h.Z.debounce(this._onSubmit.bind(this),this.options.delayChangeEvent):this._onSubmit.bind(this);this._form.removeEventListener("change",e),this._form.addEventListener("change",e)}else{let e=this.options.delayChangeEvent?h.Z.debounce(this._onChange.bind(this),this.options.delayChangeEvent):this._onChange.bind(this);this._form.removeEventListener("change",e),this._form.addEventListener("change",e),window.addEventListener("pagehide",()=>{r.Z.remove()})}}_targetMatchesSelector(e){return!!this.options.changeTriggerSelectors.find(t=>e.target.matches(t))}_onChange(e){this._updateRedirectParameters(),(!this.options.changeTriggerSelectors||this._targetMatchesSelector(e))&&(this._saveFocusState(e.target),this._submitNativeForm())}_submitNativeForm(){this.$emitter.publish("beforeChange"),this._form.submit(),r.Z.create()}_onSubmit(e){e.preventDefault(),r.Z.create(),this.$emitter.publish("beforeSubmit"),this._saveFocusState(e.target),this.formSubmittedByCaptcha||this.sendAjaxFormSubmit()}sendAjaxFormSubmit(){let e=o.Z.serialize(this._form),t=a.Z.getAttribute(this._form,"action");this._client.post(t,e,this._onAfterAjaxSubmit.bind(this))}_onAfterAjaxSubmit(e){r.Z.remove(),a.Z.querySelector(document,this.options.ajaxContainerSelector).innerHTML=e,window.PluginManager.initializePlugins(),this.$emitter.publish("onAfterAjaxSubmit")}_updateRedirectParameters(){let e=c.parse(window.location.search),t=o.Z.serialize(this._form);Object.keys(e).filter(e=>!t.has("redirectParameters[".concat(e,"]"))).map(t=>this._createInputForRedirectParameter(t,e[t])).forEach(e=>{this._form.appendChild(e)})}_createInputForRedirectParameter(e,t){let s=document.createElement("input");return s.setAttribute("type","hidden"),s.setAttribute("name","redirectParameters[".concat(e,"]")),s.setAttribute("value",t),s}_saveFocusState(e){if(this.options.autoFocus){if(this.options.useAjax){window.focusHandler.saveFocusState(this.options.focusHandlerKey,'[data-focus-id="'.concat(e.dataset.focusId,'"]'));return}window.focusHandler.saveFocusStatePersistent(this.options.focusHandlerKey,'[data-focus-id="'.concat(e.dataset.focusId,'"]'))}}_resumeFocusState(){if(this.options.autoFocus){if(this.options.useAjax){window.focusHandler.resumeFocusState(this.options.focusHandlerKey);return}window.focusHandler.resumeFocusStatePersistent(this.options.focusHandlerKey)}}}l.options={useAjax:!1,ajaxContainerSelector:!1,changeTriggerSelectors:null,delayChangeEvent:null,autoFocus:!0,focusHandlerKey:"form-auto-submit"}},5774:(e,t,s)=>{s.d(t,{ZP:()=>d,ar:()=>c});var i=s(5206),r=s(3266);let o="modal-backdrop",n="modal-backdrop-open",a="no-scroll",c=350,h={ON_CLICK:"backdrop/onclick"};class l{create(e){this._removeExistingBackdrops(),document.body.insertAdjacentHTML("beforeend",this._getTemplate());let t=document.body.lastChild;document.documentElement.classList.add(a),setTimeout(function(){t.classList.add(n),"function"==typeof e&&e()},75),this._dispatchEvents()}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=this._getBackdrops();r.Z.iterate(t,e=>e.classList.remove(n)),setTimeout(this._removeExistingBackdrops.bind(this),e),document.documentElement.classList.remove(a)}_dispatchEvents(){let e=i.Z.isTouchDevice()?"touchstart":"click";document.addEventListener(e,function(e){e.target.classList.contains(o)&&document.dispatchEvent(new CustomEvent(h.ON_CLICK))})}_getBackdrops(){return document.querySelectorAll(".".concat(o))}_removeExistingBackdrops(){if(!1===this._exists())return;let e=this._getBackdrops();r.Z.iterate(e,e=>e.remove())}_exists(){return document.querySelectorAll(".".concat(o)).length>0}_getTemplate(){return'<div class="'.concat(o,'"></div>')}constructor(){return l.instance||(l.instance=this),l.instance}}let u=Object.freeze(new l);class d{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u.create(e)}static remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;u.remove(e)}static SELECTOR_CLASS(){return o}}},6471:(e,t,s)=>{s.d(t,{Z:()=>r});var i=s(3266);class r{static serialize(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("FORM"!==e.nodeName){if(t)throw Error("The passed element is not a form!");return{}}return new FormData(e)}static serializeJson(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=r.serialize(e,t);if(0===Object.keys(s).length)return{};let o={};return i.Z.iterate(s,(e,t)=>o[t]=e),o}}},2363:(e,t,s)=>{s.d(t,{L:()=>o,Z:()=>n});var i=s(3266);let r="loader",o={BEFORE:"before",AFTER:"after",INNER:"inner"};class n{create(){if(!this.exists()){if(this.position===o.INNER){this.parent.innerHTML=n.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),n.getTemplate())}}remove(){let e=this.parent.querySelectorAll(".".concat(r));i.Z.iterate(e,e=>e.remove())}exists(){return this.parent.querySelectorAll(".".concat(r)).length>0}_getPosition(){return this.position===o.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return'<div class="'.concat(r,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}static SELECTOR_CLASS(){return r}constructor(e,t=o.BEFORE){this.parent=e instanceof Element?e:document.body.querySelector(e),this.position=t}}},5878:(e,t,s)=>{s.d(t,{Z:()=>a});var i=s(2363),r=s(5774);class o extends i.Z{create(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];!this.exists()&&e&&(r.ZP.create(),document.querySelector(".".concat(r.ZP.SELECTOR_CLASS())).insertAdjacentHTML("beforeend",i.Z.getTemplate()))}remove(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];super.remove(),e&&r.ZP.remove()}constructor(){super(document.body)}}let n=Object.freeze(new o);class a{static create(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n.create(e)}static remove(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n.remove(e)}}}}]);