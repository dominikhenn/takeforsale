"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[33174],{3174:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var s=i(9568),r=i(5878),n=i(4049),a=i(3266),o=i(3107),l=i(2940);class c extends s.Z{init(){this._httpClient=new o.Z,this._radioFields=n.Z.querySelectorAll(this.el,this.options.radioFieldSelector,!1),this._selectFields=n.Z.querySelectorAll(this.el,this.options.selectFieldSelector,!1),this._elementId=this.options.elementId,this._pageType=this.options.pageType,this._ensureFormElement(),this._preserveCurrentValues(),this._registerEvents(),this._resumeFocusState()}_ensureFormElement(){if("form"!==this.el.nodeName.toLowerCase())throw Error("This plugin can only be applied on a form element!")}_preserveCurrentValues(){this._radioFields&&a.Z.iterate(this._radioFields,e=>{c._isFieldSerializable(e)&&e.dataset&&(e.dataset.variantSwitchValue=e.value)})}_registerEvents(){this.el.addEventListener("change",e=>this._onChange(e))}_onChange(e){let t=this._getSwitchedOptionId(e.target),i=this._getFormValue();this._preserveCurrentValues(),this.$emitter.publish("onChange");let s={switched:t,options:JSON.stringify(i)};if(this._elementId&&"product_detail"!==this._pageType){let e=this.options.url+"?"+l.stringify({...s,elementId:this._elementId});document.$emitter.publish("updateBuyWidget",{url:e,elementId:this._elementId});return}this._saveFocusState(e.target),this._redirectToVariant(s)}_getSwitchedOptionId(e){return!!c._isFieldSerializable(e)&&e.name}_getFormValue(){let e={};return this._radioFields&&a.Z.iterate(this._radioFields,t=>{c._isFieldSerializable(t)&&t.checked&&(e[t.name]=t.value)}),this._selectFields&&a.Z.iterate(this._selectFields,t=>{if(c._isFieldSerializable(t)){let i=[...t.options].find(e=>e.selected);e[t.name]=i.value}}),e}static _isFieldSerializable(e){return!e.name||e.disabled||-1===["file","reset","submit","button"].indexOf(e.type)}_disableFields(){a.Z.iterate(this._radioFields,e=>{e.classList&&e.classList.add("disabled","disabled")})}_redirectToVariant(e){r.Z.create();let t=this.options.url+"?"+l.stringify(e);this._httpClient.get("".concat(t),e=>{let t=JSON.parse(e);window.location.replace(t.url)})}_saveFocusState(e){window.focusHandler.saveFocusStatePersistent(this.options.focusHandlerKey,'[id="'.concat(e.id,'"]'))}_resumeFocusState(){window.focusHandler.resumeFocusStatePersistent(this.options.focusHandlerKey)}}c.options={url:"",elementId:"",pageType:"",radioFieldSelector:".product-detail-configurator-option-input",selectFieldSelector:".product-detail-configurator-select-input",focusHandlerKey:"variant-switch"}},5774:(e,t,i)=>{i.d(t,{ZP:()=>h,ar:()=>l});var s=i(5206),r=i(3266);let n="modal-backdrop",a="modal-backdrop-open",o="no-scroll",l=350,c={ON_CLICK:"backdrop/onclick"};class d{create(e){this._removeExistingBackdrops(),document.body.insertAdjacentHTML("beforeend",this._getTemplate());let t=document.body.lastChild;document.documentElement.classList.add(o),setTimeout(function(){t.classList.add(a),"function"==typeof e&&e()},75),this._dispatchEvents()}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=this._getBackdrops();r.Z.iterate(t,e=>e.classList.remove(a)),setTimeout(this._removeExistingBackdrops.bind(this),e),document.documentElement.classList.remove(o)}_dispatchEvents(){let e=s.Z.isTouchDevice()?"touchstart":"click";document.addEventListener(e,function(e){e.target.classList.contains(n)&&document.dispatchEvent(new CustomEvent(c.ON_CLICK))})}_getBackdrops(){return document.querySelectorAll(".".concat(n))}_removeExistingBackdrops(){if(!1===this._exists())return;let e=this._getBackdrops();r.Z.iterate(e,e=>e.remove())}_exists(){return document.querySelectorAll(".".concat(n)).length>0}_getTemplate(){return'<div class="'.concat(n,'"></div>')}constructor(){return d.instance||(d.instance=this),d.instance}}let u=Object.freeze(new d);class h{static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u.create(e)}static remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;u.remove(e)}static SELECTOR_CLASS(){return n}}},2363:(e,t,i)=>{i.d(t,{L:()=>n,Z:()=>a});var s=i(3266);let r="loader",n={BEFORE:"before",AFTER:"after",INNER:"inner"};class a{create(){if(!this.exists()){if(this.position===n.INNER){this.parent.innerHTML=a.getTemplate();return}this.parent.insertAdjacentHTML(this._getPosition(),a.getTemplate())}}remove(){let e=this.parent.querySelectorAll(".".concat(r));s.Z.iterate(e,e=>e.remove())}exists(){return this.parent.querySelectorAll(".".concat(r)).length>0}_getPosition(){return this.position===n.BEFORE?"afterbegin":"beforeend"}static getTemplate(){return'<div class="'.concat(r,'" role="status">\n                    <span class="').concat("visually-hidden",'">Loading...</span>\n                </div>')}static SELECTOR_CLASS(){return r}constructor(e,t=n.BEFORE){this.parent=e instanceof Element?e:document.body.querySelector(e),this.position=t}}},5878:(e,t,i)=>{i.d(t,{Z:()=>o});var s=i(2363),r=i(5774);class n extends s.Z{create(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];!this.exists()&&e&&(r.ZP.create(),document.querySelector(".".concat(r.ZP.SELECTOR_CLASS())).insertAdjacentHTML("beforeend",s.Z.getTemplate()))}remove(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];super.remove(),e&&r.ZP.remove()}constructor(){super(document.body)}}let a=Object.freeze(new n);class o{static create(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];a.create(e)}static remove(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];a.remove(e)}}}}]);